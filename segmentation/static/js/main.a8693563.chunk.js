(this.webpackJsonpsegmentation_2=this.webpackJsonpsegmentation_2||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},26:function(e,t){},27:function(e,t){},28:function(e,t){},29:function(e,t,n){"use strict";n.r(t);var c,r,a=n(3),u=n(1),i=n.n(u),s=n(12),o=n.n(s),f=(n(18),n(2)),d=n.n(f),l=n(4),h=n(5),b=(n(20),n(7)),p=new Worker("./workers/interval.worker.js");function v(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(h.a)(d.a.mark((function e(t,n,c){var r,a,u,i,s,o,f,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.width,a=n.height,u=Math.max(r,a),320,i=Math.min(1,320/u),e.next=7,t.segmentPerson(n,{internalResolution:i,maxDetections:2,segmentationThreshold:.8});case 7:s=e.sent,o={r:0,g:0,b:0,a:0},f={r:0,g:255,b:0,a:255},l=b.c(s,o,f),1,3,!1,b.a(c,n,l,1,3,false);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(t);case 4:return n=e.sent,(c=document.createElement("video")).srcObject=n,c.play(),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function g(){var e=Object(u.useRef)(null),t=Object(u.useState)({w:0,h:0}),n=Object(l.a)(t,2),i=n[0],s=n[1],o=Object(u.useState)(null),f=Object(l.a)(o,2),j=f[0],O=f[1],g=Object(u.useState)(!1),w=Object(l.a)(g,2),x=w[0],y=w[1],E=Object(u.useState)(null),k=Object(l.a)(E,2),S=k[0],M=k[1],C=Object(u.useState)(null),L=Object(l.a)(C,2),F=L[0],H=L[1],D=Object(u.useState)(!1),I=Object(l.a)(D,2),N=I[0],P=I[1];Object(u.useEffect)((function(){null!==S&&null!==j&&null!==e.current&&x&&null!==F&&P((function(){return!0}))}),[S,j,e,x,F]),Object(u.useEffect)((function(){(function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b();case 2:t=e.sent,console.log("finished loading net"),M((function(){return t}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var R=Object(u.useCallback)((function(){F.width=640,F.height=360,y((function(){return!0}))}),[F]);return function(e){var t=e.element,n=e.eventName,c=e.handleEvent,r=Object(u.useRef)();Object(u.useEffect)((function(){r.current=c}),[c]),Object(u.useEffect)((function(){if(t){var e=function(e){return r.current(e)};return t.addEventListener(n,e),function(){t.removeEventListener(n,e)}}}),[t,n])}({element:j,eventName:"loadeddata",handleEvent:R}),Object(u.useEffect)((function(){(function(){var e=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({video:{width:1280,height:720}});case 2:t=e.sent,O((function(){return t})),s((function(e){return{w:640,h:360}})),n=document.createElement("canvas"),H((function(){return n}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(u.useEffect)((function(){}),[j]),Object(u.useEffect)((function(){N&&(p.onmessage=function(t){(function(){var t=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F.getContext("2d").drawImage(j,0,0,F.width,F.height),t.next=4,v(S,F,e.current);case 4:p.postMessage({msg:2});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()},p.postMessage({msg:3}),document.addEventListener(r,(function(){document[c]&&j.play()}),!1))}),[N,F,j,x,S]),Object(a.jsx)("canvas",{width:i.w,height:i.h,ref:e})}"undefined"!==typeof document.hidden?(c="hidden",r="visibilitychange"):"undefined"!==typeof document.msHidden?(c="msHidden",r="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(c="webkitHidden",r="webkitvisibilitychange");var w=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(g,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),a(e),u(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),x()}},[[29,1,2]]]);
//# sourceMappingURL=main.a8693563.chunk.js.map